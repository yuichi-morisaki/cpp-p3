#INCLUDE <FSTREAM>
#INCLUDE <LOCALE>
USING NAMESPACE STD;

VOID ERROR(STRING S1, STRING S2) { THROW RUNTIME_ERROR(S1 + S2); }

INT MAIN()
{
    STRING IFNAME {"EX-01.CPP"};
    IFSTREAM IFS {IFNAME};
    IF (!IFS)
        ERROR("CAN'T OPEN INPUT FILE ", IFNAME);

    STRING OFNAME {"EX-01-OUT.TXT"};
    OFSTREAM OFS {OFNAME};
    IF (!OFS)
        ERROR("CAN'T OPEN OUTPUT FILE ", OFNAME);

    FOR (STRING LINE; GETLINE(IFS, LINE); ) {
        FOR (CHAR& C: LINE)
            C = TOUPPER(C);
        OFS << LINE << '\N';
        IF (!OFS.GOOD())
            ERROR("SOMETHING WRONG WITH OUTPUT FILE ", OFNAME);
    }

    IF (IFS.EOF())
        RETURN 0;

    ERROR("SOMETHING WRONG WITH INPUT FILE ", IFNAME);
}
